<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cafe Cursor API Tester</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: system-ui, -apple-system, sans-serif;
        background: #0a0a0a;
        color: #fff;
        padding: 2rem;
        line-height: 1.6;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      h1 {
        margin-bottom: 2rem;
        font-size: 2rem;
      }
      h2 {
        margin: 2rem 0 1rem;
        color: #00ff88;
        font-size: 1.5rem;
      }
      .section {
        background: #1a1a1a;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        border: 1px solid #333;
      }
      button {
        background: #00ff88;
        color: #0a0a0a;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
        transition: all 0.2s;
      }
      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
      }
      button.delete {
        background: #ff4444;
        color: white;
      }
      pre {
        background: #000;
        padding: 1rem;
        border-radius: 4px;
        overflow-x: auto;
        margin-top: 1rem;
        border: 1px solid #333;
        font-size: 0.875rem;
      }
      .response {
        background: #000;
        padding: 1rem;
        border-radius: 4px;
        margin-top: 1rem;
        min-height: 100px;
        border: 1px solid #333;
      }
      .loading {
        color: #00ff88;
      }
      .error {
        color: #ff4444;
      }
      .success {
        color: #00ff88;
      }
      input,
      textarea {
        width: 100%;
        padding: 0.75rem;
        background: #000;
        border: 1px solid #333;
        border-radius: 4px;
        color: #fff;
        margin-bottom: 0.5rem;
        font-family: inherit;
      }
      .form-group {
        margin-bottom: 1rem;
      }
      label {
        display: block;
        margin-bottom: 0.5rem;
        color: #888;
        font-size: 0.875rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>‚òï Cafe Cursor API Tester</h1>
      <p style="color: #888; margin-bottom: 2rem">
        Test your backend API endpoints
      </p>

      <!-- Orders Section -->
      <h2>üì¶ Orders API</h2>
      <div class="section">
        <button onclick="testGetOrders()">GET All Orders</button>
        <button onclick="testCreateOrder()">POST Create Order</button>
        <div id="orders-response" class="response"></div>
      </div>

      <!-- Projects Section -->
      <h2>üöÄ Projects API</h2>
      <div class="section">
        <button onclick="testGetProjects()">GET All Projects</button>
        <button onclick="showCreateProjectForm()">POST Create Project</button>
        <div id="project-form" style="display: none; margin-top: 1rem">
          <div class="form-group">
            <label>Title</label>
            <input
              id="project-title"
              type="text"
              placeholder="My Awesome Project"
            />
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea
              id="project-desc"
              rows="3"
              placeholder="A cool project..."
            ></textarea>
          </div>
          <div class="form-group">
            <label>Author</label>
            <input id="project-author" type="text" placeholder="John Doe" />
          </div>
          <div class="form-group">
            <label>Tags (comma-separated)</label>
            <input
              id="project-tags"
              type="text"
              placeholder="nextjs, typescript"
            />
          </div>
          <button onclick="testCreateProject()">Submit Project</button>
          <button
            onclick="document.getElementById('project-form').style.display='none'"
            style="background: #333"
          >
            Cancel
          </button>
        </div>
        <div id="projects-response" class="response"></div>
      </div>

      <!-- Photos Section -->
      <h2>üì∏ Photos API</h2>
      <div class="section">
        <button onclick="testGetPhotos()">GET All Photos</button>
        <button onclick="testCreatePhoto()">POST Upload Photo</button>
        <div id="photos-response" class="response"></div>
      </div>

      <!-- Questions Section -->
      <h2>‚ùì Questions API</h2>
      <div class="section">
        <button onclick="testGetQuestions()">GET All Questions</button>
        <button onclick="testCreateQuestion()">POST Ask Question</button>
        <div id="questions-response" class="response"></div>
      </div>
    </div>

    <script>
      const API_BASE = "";

      function displayResponse(elementId, data, status = "success") {
        const el = document.getElementById(elementId);
        el.innerHTML = `
        <div class="${status}">
          ${
            status === "loading"
              ? "‚è≥ Loading..."
              : status === "error"
              ? "‚ùå Error:"
              : "‚úÖ Success:"
          }
        </div>
        <pre>${JSON.stringify(data, null, 2)}</pre>
      `;
      }

      // Orders Tests
      async function testGetOrders() {
        displayResponse("orders-response", {}, "loading");
        try {
          const res = await fetch(`${API_BASE}/api/orders`);
          const data = await res.json();
          displayResponse(
            "orders-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse("orders-response", { error: error.message }, "error");
        }
      }

      async function testCreateOrder() {
        displayResponse("orders-response", {}, "loading");
        const order = {
          customerName: "John Doe",
          email: "john@example.com",
          phone: "1234567890",
          orderType: "pickup",
          items: [
            { name: "Cappuccino", quantity: 2, price: 5.99 },
            { name: "Croissant", quantity: 1, price: 3.5 },
          ],
          total: 15.48,
          status: "pending",
        };
        try {
          const res = await fetch(`${API_BASE}/api/orders`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(order),
          });
          const data = await res.json();
          displayResponse(
            "orders-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse("orders-response", { error: error.message }, "error");
        }
      }

      // Projects Tests
      async function testGetProjects() {
        displayResponse("projects-response", {}, "loading");
        try {
          const res = await fetch(`${API_BASE}/api/projects`);
          const data = await res.json();
          displayResponse(
            "projects-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse(
            "projects-response",
            { error: error.message },
            "error"
          );
        }
      }

      function showCreateProjectForm() {
        document.getElementById("project-form").style.display = "block";
      }

      async function testCreateProject() {
        displayResponse("projects-response", {}, "loading");
        const project = {
          title:
            document.getElementById("project-title").value || "Test Project",
          description:
            document.getElementById("project-desc").value ||
            "This is a test project created via API",
          author:
            document.getElementById("project-author").value || "API Tester",
          tags: (document.getElementById("project-tags").value || "test,api")
            .split(",")
            .map((t) => t.trim()),
          githubUrl: "",
          liveUrl: "",
        };
        try {
          const res = await fetch(`${API_BASE}/api/projects`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(project),
          });
          const data = await res.json();
          displayResponse(
            "projects-response",
            data,
            res.ok ? "success" : "error"
          );
          if (res.ok) {
            document.getElementById("project-form").style.display = "none";
          }
        } catch (error) {
          displayResponse(
            "projects-response",
            { error: error.message },
            "error"
          );
        }
      }

      // Photos Tests
      async function testGetPhotos() {
        displayResponse("photos-response", {}, "loading");
        try {
          const res = await fetch(`${API_BASE}/api/photos`);
          const data = await res.json();
          displayResponse(
            "photos-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse("photos-response", { error: error.message }, "error");
        }
      }

      async function testCreatePhoto() {
        displayResponse("photos-response", {}, "loading");
        const photo = {
          url: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800",
          caption: "Great meetup at Cafe Cursor!",
          uploadedBy: "Test User",
        };
        try {
          const res = await fetch(`${API_BASE}/api/photos`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(photo),
          });
          const data = await res.json();
          displayResponse(
            "photos-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse("photos-response", { error: error.message }, "error");
        }
      }

      // Questions Tests
      async function testGetQuestions() {
        displayResponse("questions-response", {}, "loading");
        try {
          const res = await fetch(`${API_BASE}/api/questions`);
          const data = await res.json();
          displayResponse(
            "questions-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse(
            "questions-response",
            { error: error.message },
            "error"
          );
        }
      }

      async function testCreateQuestion() {
        displayResponse("questions-response", {}, "loading");
        const question = {
          question: "When is the next Cafe Cursor meetup?",
          askedBy: "Test User",
        };
        try {
          const res = await fetch(`${API_BASE}/api/questions`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(question),
          });
          const data = await res.json();
          displayResponse(
            "questions-response",
            data,
            res.ok ? "success" : "error"
          );
        } catch (error) {
          displayResponse(
            "questions-response",
            { error: error.message },
            "error"
          );
        }
      }
    </script>
  </body>
</html>
